# Configuration and Running Rules

This project uses `uv` for dependency management and requires a specific setup for Isaac Lab integration.

## Prerequisites
- **OS**: Ubuntu 22.04 or 24.04
- **Python**: 3.11 (configured in root `CMakeLists.txt`)
- **CUDA**: 12.8 (Recommended)
- **NVIDIA Driver**: 580.95.05 (Recommended)
- **uv**: Installed (`curl -LsSf https://astral.sh/uv/install.sh | sh`)

## Setup Instructions

### 1. Environment Setup
Create and activate the virtual environment using `uv`.
```bash
uv venv --python 3.11 venv_isaac
source venv_isaac/bin/activate
```

### 2. Install Dependencies
Install the required Isaac Sim and PyTorch dependencies into your virtual environment. Even with an external Isaac Lab installation, these packages must be present in the local environment for the Teleop Core wheel to function correctly.

```bash
uv pip install "isaacsim[all,extscache]==5.1.0" --extra-index-url https://pypi.nvidia.com
uv pip install -U torch==2.7.0 torchvision==0.22.0 --index-url https://download.pytorch.org/whl/cu128
```

### 3. Build Teleop Core
Build the C++ and Python packages. Run this step initially and whenever you modify C++ source code.

```bash
cmake -B build
cmake --build build --parallel
cmake --install build
```

### 4. Install/Reinstall Python Package
Install the built wheel into your virtual environment.
**Note:** Use `--force-reinstall` when updating the package after a rebuild to ensure changes are applied.

```bash
uv pip install --force-reinstall build/wheels/teleopcore-*.whl
```

**Validation:**
Verify the installation by importing a core module:
```bash
python -c "import teleopcore.deviceio"
```

## Running Standalone Examples

The standalone examples are located in `examples/teleop/python/`.

### 1. Configure External Isaac Lab (Optional but Recommended)
If you plan to run scripts that interact with the full Isaac Lab environment (like `run_isaac_lab.sh`), export the path to your external installation:

```bash
export ISAACLAB_PATH=/path/to/your/external/IsaacLab
```

### 2. Run Python Examples
Ensure your virtual environment is active (`source venv_isaac/bin/activate`), then run the examples directly:

```bash
# Example: Run the Bimanual Retargeting example
python examples/teleop/python/dex_bimanual_example.py

# Example: Run the Gripper Retargeting example
python examples/teleop/python/isaac_lab_gripper_example.py

# Example: Run the Hand Retargeting example
python examples/teleop/python/dex_hand_retargeting_example.py
```
