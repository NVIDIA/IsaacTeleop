// SPDX-FileCopyrightText: Copyright (c) 2025-2026 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
// SPDX-License-Identifier: Apache-2.0

include "timestamp.fbs";

namespace core;

// Identifies which OAK camera sensor produced a frame.
enum StreamType : byte { Color = 0, MonoLeft = 1, MonoRight = 2 }

// Per-frame metadata pushed by the OAK camera plugin (one per stream).
// All fields are always present when the parent Tracked/Record wrapper's data is non-null.
// Each stream is recorded as a separate MCAP channel using this as the root type.
table FrameMetadataOak {
  // Which camera sensor this metadata belongs to.
  stream: StreamType (id: 0);

  // Per-stream frame sequence number from the device.
  sequence_number: uint64 (id: 1);
}

// Tracked wrapper for the in-memory tracker API (data is null when no metadata available).
table FrameMetadataOakTracked {
    data: FrameMetadataOak (id: 0);
}

// MCAP recording wrapper for FrameMetadataOak.
//
// Record types are the root types written to MCAP channels by the McapRecorder.
// Trackers serialize into Record types via their serialize() method, but the
// public query API returns the inner data type directly.
table FrameMetadataOakRecord {
    data: FrameMetadataOak (id: 0);
    timestamp: DeviceDataTimestamp (id: 1);
}

root_type FrameMetadataOakRecord;
